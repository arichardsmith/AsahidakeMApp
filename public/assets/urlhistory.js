var UrlHistory=function(a,t){"use strict";function e(a){return a&&"object"==typeof a&&"default"in a?a:{default:a}}var o=e(t);function n(a,t){const e=setTimeout(c,100);return new Promise((n,i)=>{o.default(a).load(t,(a,t,o)=>{if(clearTimeout(e),"error"===t){const a=o.statusText;l("error",a),i(new Error(a))}else l(),n()})})}const i=document.getElementById("loader"),s=i.querySelector(".message"),u=i.querySelector(".message-text"),r=i.querySelector("progress");function l(a,t){switch(console.log(`${a} - ${t}`),a){case"loading":u.innerText="読み込み中",r.style.display="block",s.classList.remove("is-danger"),i.classList.add("visible");break;case"error":u.innerHTML="読み込みエラー<br />"+t,r.style.display="none",s.classList.add("is-danger"),i.classList.add("visible");break;default:i.classList.remove("visible")}}function c(){l("loading")}let d=!1;function m(a){if(d)return AsahidakeMap.fitView(a)}function b(a){if(d)return AsahidakeMap.highlightTrail(a)}async function f(a){switch(a){case"aboutDaisetsuzan":await n("#column","aboutDaisetsuzan.html"),m("loop"),b(null);break;case"aboutTrailToPeak":await n("#column","aboutTrailToPeak.html"),m("summit"),b("summit");break;case"about6hLoop":await n("#column","about6hLoop.html"),m("loop"),b("loop");break;case"info":await n("#column","info.html"),b(null);break;case"aboutDaisetsuzanGrade":await n("#column","aboutDaisetsuzanGrade.html"),b(null);break;case"blog":await n("#column","blog.html"),b(null);break;case"aboutSugatami":default:await n("#column","aboutSugatami.html"),m("sugatami"),b("sugatami")}}function g(a){console.dir("pushStateAndNav"),window.history.pushState({page:a},null,"#/"+a),f(a)}function h(a,t){document.getElementById(a).addEventListener("click",t)}new Promise((a,t)=>{if(void 0!==window.AsahidakeMap)return a(window.AsahidakeMap);document.getElementById("map-script").addEventListener("load",()=>{void 0!==window.AsahidakeMap?(d=!0,a(window.AsahidakeMap)):t(new Error("Error loading map script"))})}),h("aboutDaisetsuzan",(function(){g("aboutDaisetsuzan")})),h("aboutSugatami",(function(){g("aboutSugatami")})),h("aboutTrailToPeak",(function(){g("aboutTrailToPeak")})),h("about6hLoop",(function(){g("about6hLoop")})),h("info",(function(){g("info")})),h("aboutDaisetsuzanGrade",(function(){g("aboutDaisetsuzanGrade")})),h("blog",(function(){g("blog")}));const p=document.querySelectorAll(".navbar-burger,.navbar-menu");function w(){for(let a of p)a.classList.toggle("is-active")}for(let a of p)a.addEventListener("click",w);return window.onpopstate=function(){const a=null!==history.state?history.state.page:null;console.dir("onpopstate  state:"+a),f(a)},f(document.location.hash.substring(2)),a.doNav=f,a.pushStateAndNav=g,a}({},$);
//# sourceMappingURL=urlhistory.js.map
